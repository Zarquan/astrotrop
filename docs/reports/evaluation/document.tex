%%This is a very basic article template.
%%There is just one section and two subsections.
\documentclass{article}

\usepackage{endnotes}
	
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
 
\setlength{\parindent}{4em}
\setlength{\parskip}{1em}

\begin{document}

\section{Introduction}

Some text ..

\section{The IVOA}

The International Virtual Observatory Alliance (IVOA) was formed in June 2002
with a mission to "facilitate the international coordination and collaboration
necessary for the development and deployment of the tools, systems and
organizational structures necessary to enable the international utilization of
astronomical archives as an integrated and interoperating virtual observatory."

The work of the IVOA focuses on the development of standards, providing a forum
for members to debate and agrees the technical standards that are needed to make
the VO possible.

\section{The Virtual Observatory}

The Virtual Observatory (VO) is the realization of the IVOA vision of an
\textit{``an integrated and interoperating virtual observatory''}.

The operational VO itself is comprised of a distributed metadata registry, along
with data discovery and data access services deployed at each participating
institutes, which together enable the system to present a uniform mechanism for
discovering and accessing data, irrespective of where it is physically located.

The architecture of the VO and the data discovery process that it is designed to
support are very similar to the interconnected metadata collections approach
described in (Jones et al. 2006).
\endnote{The new bioinformatics: integrating ecological data from the gene to the biosphere (Jones et al. 2006)}
\endnote{doi:10.1146/annurev.ecolsys.37.091305.110031}
\endnote{http://www.annualreviews.org/doi/abs/10.1146/annurev.ecolsys.37.091305.110031}

\begin{quote}
An alternative, more robust approach to the highly structured, vertically integrated
data warehouse is a more loosely structured collection of project-specific data sets
accompanied by structured metadata about each of the data sets.
\end{quote}

\begin{quote}
Each of the data sets is stored in a manner that is opaque to the data system in
that the data themselves cannot be directly queried; rather, the structured
metadata describing the data is queried in order to locate data sets of
interest. After data sets of interest are located, more detailed information
(such as the detailed data model that specifies, e.g., the definitions of the
variables) can be extracted from the metadata and used to load, query, and
manipulate individual data sets.
\end{quote}

A useful way to illustrate how the components of the VO architecture work
together is to look at an example data discovery task such as selecting images
covering a particular region of the sky, in a particular wavelength e.g.
infrared, visible light, radio or xray,

\subsubsection{Service discovery}

The first step of the process is to identify the services that provide access to
the type of data we are looking for by querying the VO Registry.

The VO Registry is comprised of a number of small local registries, typically
hosted at the participating institute level, working in cooperation with
a number of higer level global registries that aggregate the data
from the smaller registries to create a global searchable index of
service and dataset metadata. 

When a new service is deployed, part of the deployment process
involves registering the service with the local registry.
The local registry is then responsible for collecting and storing the
metadata that describes the service capabilities and the datasets
that the service provides access to.

Once the metadata is registered in a local registry, it is automatically
propagated up to the next level and replicated between the global registries.

This means that a client can access all of the available metadata
for all of the services and datasets in the VO by querying one of the 
global registries.

The first step in our example is to identify services that provide access to
the type of data we are looking for, in this case images, by querying the registry
for services that support the Simple Image Access (SIA)
\endnote{http://www.ivoa.net/documents/SIA/}
capability.

In addition to the technical details of services and their capabilities
the metadata in the registry also contains details about the content of the datasets,
including details of the wavelength used to create the images,
e.g. infrared, visible light, radio or xray.

This allows us to refine our registry query to find services that contain
images in a specific waveband,
e.g. \texttt{optical} or \texttt{infrared}

A recent addition to the IVOA specifications is the 
HEALPix Multi-Order Coverage Map (MOC)
\endnote{http://www.ivoa.net/documents/MOC/}
which will allow registry services to perform coarse grained region matches.

Once this is in place we would be able to further refine our query to
filter for services that contained data in a particular region of the sky.

\subsubsection{Data discovery}

Having identified a list of services that contain the type of data we are
interested in, images covering a particular region of the sky,
in a particular wavelength.

The next stage of the process is to query each of the SIA services in our list
to discover details about the individual images available from that service.

\noindent
A SIA query can specify parameters for a particular wavelength and a particular
region of the sky :
\begin{itemize}
  \item \texttt{POS}  The positional region
  \item \texttt{BAND} The the energy interval
\end{itemize}
(the full list of SIA search parameters is given in appendix A)

Each SIA service would return a VOTable, each row of which contains data about an
individual image. The details of the columns in the response are defined
in the ObsCore \endnote{http://www.ivoa.net/documents/ObsCore/} data model.

The result is we get a standard response from each service, which can be
combined to produce a list of all the images available in the VO that match
our search criteria.

The user can select which data products they are interested in, and the client
software can use the metadata in the SIA results to access the individual data
products and display them in the appropriate display tools.

The two key components of this process are
\begin{itemize}
  \item A standard interface for the global registry
that uses a standard set of attributes to describe datasets and services
enabling 3rd party software to query the service using a standard query syntax
  \item A standard interface for local data access services
that uses a standard set of attributes to describe data products within the service
enabling 3rd party software to query the service using a standard query syntax
\end{itemize}

This separation between the initial service discovery query
followed by individual data discovery queries
corresponds to the two stages described in (Jones et al. 2006)
of first querying the metadata to establish the data location
followed by a more detailed individual queries
to establish what the data is and how to access it. 

\subsection{Carbon density comparison}

We can now compare our description of how the existing IVOA Virtual Observatory
handles the data discovery process for astronomy data with a use case
based on a paper
(Mitchard et al., 2014)
\endnote{doi:10.1111/geb.12168}
\endnote{http://onlinelibrary.wiley.com/doi/10.1111/geb.12168/abstract}
describing the steps involved in comparing two sets of remote sensing data from

the NASA Jet Propulsion Laboratory
(Saatchi et al., 2011)
\endnote{doi:10.1073/pnas.1019576108}
\endnote{http://www.pnas.org/content/108/24/9899}
and the Woods Hole Research Center
(Baccini et al., 2012)
\endnote{doi:10.1038/nclimate1354}
\endnote{http://www.nature.com/nclimate/journal/v2/n3/full/nclimate1354.html}

with four sets of ground plot data from

Red Amaz√≥nica de Inventarios Forestales (RAINFOR) (Malhi et al., 2002)
\endnote{http://www.rainfor.org/}

the
Amazon Tree Diversity Network (ATDN) (ter Steege et al., 2003)
\endnote{http://web.science.uu.nl/Amazon/ATDN/} 

Tropical Ecology Assessment and Monitoring (TEAM)
\endnote{http://www.teamnetwork.org/}

and the
Brazilian Program for Biodiversity Research (PPBio)
\endnote{doi:10.7809/b-e.00083}
\endnote{http://www.biodiversity-plants.de/biodivers_ecol/article_meta.php?DOI=10.7809/b-e.00083}


In order to calculate a single above ground biomass (AGB) dataset,
the different sets of ground plot data were
combined together in the
ForestPlots.Net (Lopez-Gonzalez et al., 2009, 2011)
\endnote{http://www.forestplots.net/}
\endnote{http://onlinelibrary.wiley.com/doi/10.1111/j.1654-1103.2011.01312.x/abstract}
\endnote{doi:10.1111/j.1654-1103.2011.01312.x}
database.

ForestPlots.Net is a website and database designed 
\begin{quote}
\ldots as a repository for long-term intact tropical forest inventory
plots, where trees within an area are individually identified,
measured and tracked through time
\end{quote}

In addition to the raw measurements of tree diameter, the ForestPlots.Net database
stores a comprehensive set of metadata including taxonomic information about
the individual trees and detailed metadata about the plots.

At time of writing, the ForestPlots.Net
database contains data for 739,000 trees
in 1400 plots, in 31 countries.

Of the three sets of ground plot data, 
the data from RAINFOR and ATDN
were already available in the
ForestPlots.Net
database.

The plot data from the TEAM and PPBio projects were downloaded
and imported into the ForestPlots.Net database
manually (* unconfirmed for PPBio).

The principal AGB dataset was calculated using the three
parameter moist tropical forest model from Chave et al. (2005),
(Tree allometry and improved estimation of carbon stocks and balance in tropical forests)
\endnote{http://link.springer.com/article/10.1007%2Fs00442-005-0100-x}
\endnote{doi:10.1007/s00442-005-0100-x}


\begin{quote}
The individual stem
data for every plot used in this study are held in a database
(http://www.forestplots.net/), which allowed us to calculate
plot-level AGB consistently with a single T-SQL query (Lopez-
Gonzalez et al., 2009, 2011). The TEAM plots were downloaded
and added to the database in April 2013, with data set identifier
codes of 20130415013221_3991 and 20130405063033_1587.
\end{quote}













\subsection{VO services}


\subsection{The registry}

The VO Registry provides the first layer of data discovery available in the
virtual observatory. The individual registry services deployed at participating
institutes work together to provide a shared repository for describing datasets,
data access services and data processing services in a standard way.

The IVOA Registry Interfaces standard
\endnote{http://www.ivoa.net/documents/RegistryInterface/}
defines the web service interfaces that support interactions between
applications and registries as well as between the registries themselves.

The high level structure of the registry content is defined by a
set of IVOA standards, including a standard format for IVOA Identifiers
\endnote{http://www.ivoa.net/documents/latest/IDs.html}
and the basic Resource Metadata
\endnote{http://www.ivoa.net/Documents/latest/RM.html}

The details of the registry metadata are covered by a set of technical
standards defining the detailed XML schemas for resource metadata.
\begin{itemize}
  \item VOResource
  \endnote{http://www.ivoa.net/documents/latest/VOResource.html}
  \item VODataService
  \endnote{http://www.ivoa.net/documents/VODataService/} 
  \item Simple Data Access Services
  \endnote{http://www.ivoa.net/documents/SimpleDALRegExt/20131005/}
\end{itemize}




\subsection{Service registration}

VOSI \ldots and stuff \ldots

\subsection{Service metadata}

registry metadata queries \ldots and stuff \ldots

\subsection{Service footprint}

registry footprint queries \ldots and stuff \ldots

HEALPix Multi-Order Coverage Map (MOC)
\endnote{http://www.ivoa.net/documents/MOC/}

\subsection{Data access services}

The VO DataAccess services can be categorised as two types of services.

A set of type specific data discovery servces which are designed to provide
simple service interfaces for discovering and acessing data of a specific type.

\begin{itemize}
  \item Simple Cone Search (SCS)
  \endnote{http://www.ivoa.net/documents/latest/ConeSearch.html}
  \item Simple Image Access (SIA)
  \endnote{http://www.ivoa.net/documents/SIA/}
  \item Simple Spectral Access (SSA)
  \endnote{http://www.ivoa.net/documents/SSA/}
  \item Simple Line Access (SLA)
  \endnote{http://www.ivoa.net/documents/SLAP/}
\end{itemize}

A tabular data access services for querying tabluar data using a common query
derrived from SQL.

\begin{itemize}
  \item Table Access Protocol (TAP)
  \endnote{http://www.ivoa.net/Documents/TAP/}
  \item Astronomy Data Query Language (ADQL)
  \endnote{http://www.ivoa.net/Documents/latest/ADQL.html}
\end{itemize}

\subsubsection{Simple Image Access}

The Simple Image Access (SIA) protocol provides 
\begin{quote}
parameter based discovery of images and datacubes, querying the service(s) with
a few well known kinds of queries that cover greater than 95\% of use, and
getting back easily parsed summary metadata about each available data product
\end{quote}

The Simple Image Access (SIA) data discovery service provides support for
the following use cases:

\begin{itemize}
  \item find data that includes specified coordinates (e.g. for some object) 
  \item find data in the circle with coordinate centre and radius 
  \item find data in a range of longitude and latitude 
  \item find data within a specified simple  polygon (one region, no holes, less
  than half the sphere)
  \item find data containing a specified energy (e.g. wavelength) or in a
  specified range of energy values
  \item find data obtained at a specified time (e.g. including a time instant)
  or during a specified range of times
  \item find data obtained with specified polarization (Stokes) states 
  \item find data within a specified range of spatial resolution 
  \item find data within a specified range of field-of-view 
  \item find data within a range of exposure (integration) time 
\end{itemize}

The response from a successful SIA data discovery query is a VOTable containing
instances of the ObsCore \endnote{http://www.ivoa.net/documents/ObsCore/} data
model.

Each row in the results corresponds to a data product that matches the search
criteria and includes details of how to access the data products or how
to request additional matadata.

\subsubsection{Simple Spectral Access}

The Simple Spectral Access (SSA) protocol is similar to the Simple Image Access (SIA) protocol.

The primary differences are the type of data searched for, and the set of query
parameters.

\begin{quote}
\ldots discover and access one dimensional spectra
\ldots based on a general data model capable of describing most tabular
spectrophotometric data, including time series and spectral energy distributions
(SEDs) as well as 1-D spectra
\end{quote}

\subsubsection{Simple Line Access}

The Simple Line Access (SLA) protocol is similar to the Simple Image Access
(SIA) protocol.

The primary differences are the type of data searched for, and the set of query
parameters.

\begin{quote}
\ldots retrieving spectral lines coming from various Spectral Line Data
Collections
\ldots either observed or theoretical and will be typically used to identify
emission or absorption features in astronomical spectra.
\ldots makes use of the Simple Spectral Line Data Model
(SSLDM) \endnote{http://www.ivoa.net/documents/SSLDM/} to characterize spectral
lines through the use of uTypes
\endnote{http://www.ivoa.net/documents/Notes/UTypesUsage/index.html}
\end{quote}
  
\subsubsection{Table Access Protocol}

Table Access Protocol (TAP) is a generic protocol for accessing general table
data, including astronomical catalogs as well as general database tables, with
support for both synchronous and asynchronous queries.

Special support is provided for spatially indexed queries using the spatial
extensions in ADQL.

A multi-position query capability permits queries against an arbitrarily large
list of astronomical targets, providing a simple spatial cross-matching
capability.

Deploying the same standard interface and query language across multiple sites
means that cross-matching queries are possible by orchestrating a distributed
query across multiple TAP services.

 

\subsubsection{GIVD}
Global Index of Vegetation-Plot Databases (GIVD)
\endnote{http://onlinelibrary.wiley.com/doi/10.1111/j.1654-1103.2011.01265.x/abstract}

\begin{quote}
Our longer-term vision is to develop GIVD in ways similar to Metacat (Jones et
al. 2006), so that, ultimately, users who query GIVD will not only receive
information on which databases contain data suitable for the intended analyses,
but they will also discover other data from distributed databases, with GIVD
acting as the central node.
\end{quote}








Issues about data sharing










\appendix
\section{SIA search parameters}
\noindent
The SIA search parameters include
\begin{itemize}
  \item \texttt{POS}  The positional region
  \item \texttt{BAND} The the energy interval
  \item \texttt{TIME} The the time interval
  \item \texttt{POL}  The the polarization state
  \item \texttt{FOV}  The the field of view
  \item \texttt{SPATRES} The the spatial resolution
  \item \texttt{EXPTIME} The the exposure time
  \item \texttt{COLLECTION} The name of the data collection that contains the data
  \item \texttt{FACILITY} The name of the facility where the data was acquired
  \item \texttt{INSTRUMENT} The name of the instrument with which the data was acquired
  \item \texttt{DPTYPE} The data type from the ObsCore
  \endnote{http://www.ivoa.net/documents/ObsCore/} data model
  \item \texttt{CALIB} The calibration level
  \item \texttt{TARGET} The target name from the ObsCore
  \endnote{http://www.ivoa.net/documents/ObsCore/} data model
  \item \texttt{TIMERES} The temporal resolution
  \item \texttt{SPECRP} The spectral resolving power
  \item \texttt{FORMAT} The data format
\end{itemize}



\theendnotes

\end{document}
